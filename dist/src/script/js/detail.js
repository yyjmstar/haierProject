"use strict";!function(h){var s=location.search.split("?")[1].split("=")[1],c=h(".item-bpic img"),p=h(".item-title"),a=h(".item-info-list .price"),l=h(".piclist-all ul"),r=h(".bpic"),f=h(".item-piclist .left"),m=h(".item-piclist .right"),i=h("#buy_Now"),e=h(".buy-num .num");h.ajax({url:"http://10.31.158.16/HaierProject/php/details-part3xyj.php",dataType:"json",data:{itemid:s}}).done(function(i){var t;t=i.tabpicurls.split("ï¼Œ"),c.attr({src:""+i.picurl}),r.attr({src:""+i.picurl}),p.html(""+i.title),a.html(""+i.price);var s="";h.each(t,function(i,t){s+='\n            <li class="lists">\n            <a href="">\n                <img src="'+t+'" alt="">\n            </a>\n        </li>\n            '}),l.append(s),h(".piclist-all ul li").on("mouseover",function(){var i=h(this).find("img").attr("src");c.attr({src:i}),r.attr({src:i})});var e=5,o=h(".piclist-all ul li"),n=o.eq(0).width();l.width(n*o.length),m.on("click",function(){o.length>e&&e++,o.length,l.stop().animate({left:-(e-5)*n})}),f.on("click",function(){5<e&&e--,l.stop().animate({left:-(e-5)*n})})});var o=[],n=[];i.on("click",function(){if(h(".cartclick_choose").show(),h(".bgmask").addClass("so-openmask"),console.log(h(".cartclick_choose")),h.cookie("itemid")&&h.cookie("itemnum")&&(o=h.cookie("itemid").split(","),n=h.cookie("itemnum").split(",")),-1===h.inArray(s,o))o.push(s),n.push(e.val()),h.cookie("itemid",o.join(","),{expires:10}),h.cookie("itemnum",n.join(","),{expires:10});else{var i=h.inArray(s,o),t=parseInt(n[i])+parseInt(e.val());n[i]=t,h.cookie("itemnum",n.join(","),{expires:10})}}),h(".s-sopop-close").on("click",function(){h(".cartclick_choose").hide(),h(".bgmask").removeClass("so-openmask")})}(jQuery),function(i){function t(){this.itemcontainer=i(".item-bpic"),this.spic=i(".item-bpic img"),this.sf=i(".item-bpic .sf"),this.df=i(".df"),this.bpic=i(".bpic")}t.prototype.init=function(){var s=this;this.itemcontainer.hover(function(){s.df.show(),s.sf.show(),s.sfsize(),s.sf.on("mousemove",function(i){var t=i||window.event;s.sfposition(t),s.bpicposition()})},function(){s.df.hide(),s.sf.hide()})},t.prototype.sfposition=function(i){lp=i.pageX-this.itemcontainer.offset().left-this.sf.width()/2,tp=i.pageY-this.itemcontainer.offset().top-this.sf.height()/2,lp<=0?lp=0:lp>=this.itemcontainer.width()-this.sf.width()&&(lp=this.itemcontainer.width()-this.sf.width()),tp<=0?tp=0:tp>=this.itemcontainer.height()-this.sf.height()&&(tp=this.itemcontainer.height()-this.sf.height()),this.sf.css({left:lp,top:tp})},t.prototype.sfsize=function(){var i=this.df.width()*this.spic.width()/this.bpic.width(),t=this.df.height()*this.spic.height()/this.bpic.height();this.lrate=this.df.width()/this.sf.width(),this.trate=this.df.width()/this.sf.height(),this.sf.width(i),this.sf.height(t)},t.prototype.bpicposition=function(){this.bpic.css({left:-this.lrate*lp,top:-this.trate*tp})},(new t).init()}(jQuery);