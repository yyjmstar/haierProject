"use strict";!function(o){var s=location.search.split("?")[1].split("=")[1],p=o(".item-bpic img"),c=o(".item-title"),r=o(".item-info-list .price"),l=o(".piclist-all ul"),a=o(".bpic"),f=o(".item-piclist .left"),m=o(".item-piclist .right"),i=o("#buy_Now"),e=o(".buy-num .num");o.ajax({url:"http://10.31.158.16/HaierProject/php/details-part3xyj.php",dataType:"json",data:{itemid:s}}).done(function(i){var t;t=i.tabpicurls.split("ï¼Œ"),p.attr({src:""+i.picurl}),a.attr({src:""+i.picurl}),c.html(""+i.title),r.html(""+i.price);var s="";o.each(t,function(i,t){s+='\n            <li class="lists">\n            <a href="">\n                <img src="'+t+'" alt="">\n            </a>\n        </li>\n            '}),l.append(s),o(".piclist-all ul li").on("mouseover",function(){var i=o(this).find("img").attr("src");p.attr({src:i}),a.attr({src:i})});var e=5,n=o(".piclist-all ul li"),h=n.eq(0).width();l.width(h*n.length),m.on("click",function(){n.length>e&&e++,n.length,l.stop().animate({left:-(e-5)*h})}),f.on("click",function(){5<e&&e--,l.stop().animate({left:-(e-5)*h})})});var n=[],h=[];i.on("click",function(){if(o.cookie("itemid")&&o.cookie("itemnum")&&(n=o.cookie("itemid").split(","),h=o.cookie("itemnum").split(",")),-1===o.inArray(s,n))n.push(s),h.push(e.val()),o.cookie("itemid",n.join(","),{expires:10}),o.cookie("itemnum",h.join(","),{expires:10});else{var i=o.inArray(s,n),t=parseInt(h[i])+parseInt(e.val());h[i]=t,o.cookie("itemnum",h.join(","),{expires:10})}})}(jQuery),function(i){function t(){this.itemcontainer=i(".item-bpic"),this.spic=i(".item-bpic img"),this.sf=i(".item-bpic .sf"),this.df=i(".df"),this.bpic=i(".bpic")}t.prototype.init=function(){var s=this;this.itemcontainer.hover(function(){s.df.show(),s.sf.show(),s.sfsize(),s.sf.on("mousemove",function(i){var t=i||window.event;s.sfposition(t),s.bpicposition()})},function(){s.df.hide(),s.sf.hide()})},t.prototype.sfposition=function(i){lp=i.pageX-this.itemcontainer.offset().left-this.sf.width()/2,tp=i.pageY-this.itemcontainer.offset().top-this.sf.height()/2,lp<=0?lp=0:lp>=this.itemcontainer.width()-this.sf.width()&&(lp=this.itemcontainer.width()-this.sf.width()),tp<=0?tp=0:tp>=this.itemcontainer.height()-this.sf.height()&&(tp=this.itemcontainer.height()-this.sf.height()),this.sf.css({left:lp,top:tp})},t.prototype.sfsize=function(){var i=this.df.width()*this.spic.width()/this.bpic.width(),t=this.df.height()*this.spic.height()/this.bpic.height();this.lrate=this.df.width()/this.sf.width(),this.trate=this.df.width()/this.sf.height(),this.sf.width(i),this.sf.height(t)},t.prototype.bpicposition=function(){this.bpic.css({left:-this.lrate*lp,top:-this.trate*tp})},(new t).init()}(jQuery);